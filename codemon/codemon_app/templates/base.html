{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}CodeMon - Learn Tech, Collect codemon!{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" href="{% static 'css/layout/navigation.css' %}">
    <link rel="stylesheet" href="{% static 'css/components/buttons.css' %}">
    <link rel="stylesheet" href="{% static 'css/components/forms.css' %}">
    <link rel="stylesheet" href="{% static 'css/components/cards.css' %}">
    <link rel="stylesheet" href="{% static 'css/components/badges.css' %}">
    <link rel="stylesheet" href="{% static 'css/pages/battle.css' %}">
    <link rel="stylesheet" href="{% static 'css/pages/home.css' %}">
    <link rel="stylesheet" href="{% static 'css/pages/collection.css' %}">

</head>

<body>
    <nav class="main-nav" aria-label="Main navigation">
        <div class="nav-container">
            <a href="{% url 'home' %}" class="nav-brand">CodeMon</a>
            <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false" aria-controls="nav-menu">
                <span class="hamburger-box">
                    <span class="hamburger-inner"></span>
                </span>
            </button>

           <div class="nav-menu" id="nav-menu">
    <!-- Regular Navigation -->
    <a href="{% url 'home' %}" class="nav-link">Home</a>
        {% if user.is_authenticated %}
        <a href="#" class="nav-link">Profile</a>  <!-- KEEP THIS for mobile order -->
        {% endif %}
    <a href="{% url 'codemon-list' %}" class="nav-link">All Codemon</a>
    <a href="{% url 'battle-encounter' %}" class="nav-link">Battle!</a>

    {% if user.is_authenticated %}
        <!-- DESKTOP User Dropdown (keep as is) -->
        <div class="desktop-user-dropdown">
            <button class="user-initials-btn dropdown-toggle">
                {{ user.first_name|first|default:user.username.0|upper }}{{user.last_name|first|default:""|upper }}
            </button>
            <div class="desktop-dropdown-menu">
                <div class="desktop-dropdown-header">
                    <strong>{{ user.username }}</strong>
                    {% if user.email %}
                    <small>{{ user.email }}</small>
                    {% endif %}
                </div>
                <div class="desktop-dropdown-divider"></div>
                <a href="#" class="desktop-dropdown-item">Profile</a>
                <a href="{% url 'my-collection' %}" class="desktop-dropdown-item">My Collection</a>
                <div class="desktop-dropdown-divider"></div>
                <form method="post" action="{% url 'logout' %}" class="desktop-dropdown-form">
                    {% csrf_token %}
                    <button type="submit" class="desktop-dropdown-item desktop-logout-btn">Logout</button>
                </form>
            </div>
        </div>

        <!-- MOBILE Auth Links -->
        <div class="mobile-auth-links">
            <a href="{% url 'my-collection' %}" class="nav-link">My Collection</a>
            <form method="post" action="{% url 'logout' %}" class="mobile-logout-form">
                {% csrf_token %}
                <button type="submit" class="nav-link nav-button">Logout</button>
            </form>
        </div>
    {% else %}
        <!-- Guest links -->
        <a href="{% url 'login' %}" class="nav-link">Login</a>
        <a href="{% url 'signup' %}" class="nav-link">Sign Up</a>
    {% endif %}
</div>
        </div>
    </nav>

    <main class="main-content" role="main">
        {% block content %}

        {% endblock %}
    </main>
    <script src="{% static 'js/navigation.js' %}" defer></script>
    <script src="{% static 'js/initials.js' %}" defer></script>
</body>

</html>